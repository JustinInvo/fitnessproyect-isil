<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Insert title here</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  </head>
  <body>
    <nav class="navbar navbar-expand-lg bg-body-tertiary">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">Fitness</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="#">Clientes</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Trainers</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Planes</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Entrenadores</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Reportes</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <div class="container-fluid mt-2">
      <button class="btn btn-primary mb-4" data-bs-toggle="modal" th:attr="data-bs-target='#crearModal'">Crear</button>
      <div class="d-flex flex-column mb-4" style="gap: 20px;">
	      <div th:each="plan : ${planes}" class="card text-center">
	        <div class="card-header">
	          <h5 class="card-title" th:text="${plan.nombre}"></h5>
	        </div>
	        <div class="card-body">
	          <p class="card-text">
	            Duración: <span th:text="${plan.duracion_meses}"></span> meses<br>
	            Entrenamientos por mes: <span th:text="${plan.entrenamientos_mes}"></span><br>
	            Categoría: <span th:text="${plan.categoria}"></span><br>
	            Precio: $<span th:text="${plan.precio}"></span><br>
	            Días para renovación: <span th:text="${plan.dias_renovacion}"></span>
	          </p>
	          <div class="d-flex justify-content-center" style="gap: 6px;">
		            <button class="btn btn-primary" data-bs-toggle="modal" th:attr="data-bs-target='#editModal' + ${plan.id}">Editar</button>
		            <button class="btn btn-danger" data-bs-toggle="modal" th:attr="data-bs-target='#deleteModal' + ${plan.id}">Eliminar</button>
		        </div>
	        </div>
	        <!-- Modal para crear -->
	        <div th:id="crearModal" class="modal fade" tabindex="-1" aria-labelledby="editModalLabel" aria-hidden="true">
	          <div class="modal-dialog modal-dialog-centered">
	            <div class="modal-content">
	              <div class="modal-header">
	                <h1 class="modal-title fs-5" id="editModalLabel">Crear Plan</h1>
	                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
	              </div>
	              <div class="modal-body">
	                <form th:action="@{'/planes/nuevo'}" method="post" class="text-start">
	                  <div class="mb-3">
				            <label for="nombre" class="form-label">Nombre</label>
				            <input type="text" class="form-control" id="nombre" name="nombre" required>
				        </div>
				        <div class="mb-3">
				            <label for="duracion_meses" class="form-label">Duración (Meses)</label>
				            <input type="number" class="form-control" id="duracion_meses" name="duracion_meses" required>
				        </div>
				        <div class="mb-3">
				            <label for="entrenamientos_mes" class="form-label">Entrenamientos por Mes</label>
				            <input type="number" class="form-control" id="entrenamientos_mes" name="entrenamientos_mes" required>
				        </div>
				        <div class="mb-3">
				            <label for="categoria" class="form-label">Categoría</label>
				            <input type="text" class="form-control" id="categoria" name="categoria" required>
				        </div>
				        <div class="mb-3">
				            <label for="precio" class="form-label">Precio</label>
				            <input type="number" step="0.01" class="form-control" id="precio" name="precio" required>
				        </div>
				        <div class="mb-3">
				            <label for="dias_renovacion" class="form-label">Días de Renovación</label>
				            <input type="number" class="form-control" id="dias_renovacion" name="dias_renovacion" required>
				        </div>
	                  <button type="submit" class="btn btn-primary w-100">Guardar</button>
	                </form>
	              </div>
	            </div>
	          </div>
	        </div>
	        <!-- Modal para editar -->
	        <div th:id="'editModal' + ${plan.id}" class="modal fade" tabindex="-1" aria-labelledby="editModalLabel" aria-hidden="true">
	          <div class="modal-dialog modal-dialog-centered">
	            <div class="modal-content">
	              <div class="modal-header">
	                <h1 class="modal-title fs-5" id="editModalLabel">Editar Plan</h1>
	                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
	              </div>
	              <div class="modal-body">
	                <form th:action="@{'/planes/' + ${plan.id}}" method="post" class="text-start">
	                  <div class="mb-3">
	                    <label for="nombre" class="form-label">Nombre</label>
	                    <input type="text" class="form-control" id="nombre" name="nombre" th:value="${plan.nombre}">
	                  </div>
	                  <div class="mb-3">
	                    <label for="duracion_meses" class="form-label">Duración (Meses)</label>
	                    <input type="text" class="form-control" id="duracion_meses" name="duracion_meses" th:value="${plan.duracion_meses}">
	                  </div>
	                  <div class="mb-3">
	                    <label for="entrenamientos_mes" class="form-label">Entrenamientos (Meses)</label>
	                    <input type="text" class="form-control" id="entrenamientos_mes" name="entrenamientos_mes" th:value="${plan.entrenamientos_mes}">
	                  </div>
	                  <div class="mb-3">
	                    <label for="categoria" class="form-label">Categoria</label>
	                    <input type="text" class="form-control" id="categoria" name="categoria" th:value="${plan.categoria}">
	                  </div>
	                  <div class="mb-3">
	                    <label for="precio" class="form-label">Precio</label>
	                    <input type="text" class="form-control" id="precio" name="precio" th:value="${plan.precio}">
	                  </div>
	                  <div class="mb-3">
	                    <label for="dias_renovacion" class="form-label">Renovacion (días)</label>
	                    <input type="text" class="form-control" id="dias_renovacion" name="dias_renovacion" th:value="${plan.dias_renovacion}">
	                  </div>
	                  <button type="submit" class="btn btn-primary w-100">Guardar</button>
	                </form>
	              </div>
	            </div>
	          </div>
	        </div>
	        <!-- Modal para eliminar -->
	        <div th:id="'deleteModal' + ${plan.id}" class="modal fade" tabindex="-1" aria-labelledby="deleteModalLabel" aria-hidden="true">
	          <div class="modal-dialog modal-dialog-centered">
	              <div class="modal-content">
	                  <div class="modal-header">
	                    <h1 class="modal-title fs-5" id="deleteModalLabel">Eliminar Plan</h1>
	                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
	                  </div>
	                  <div class="modal-body">
	                    <form th:action="@{'/planes/' + ${plan.id} + '/eliminar'}" method="post" class="text-start">
	                    	<p>¿Estas seguro que quieres eliminar el plan <b th:text="${plan.nombre}"></b>?<p>
	                      <button type="submit" class="btn btn-danger w-100">Eliminar</button>
	                    </form>
	                  </div>
	              </div>
	          </div>
	        </div>
	      </div>
      </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
  </body>
</html>